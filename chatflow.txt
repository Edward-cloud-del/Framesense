ğŸš€ FRAMESENSE SELECT + CHATBOX INTEGRATION PLAN
=================================================

ğŸ“‹ MÃ…LSÃ„TTNING:
Integrera Select-flÃ¶det med ChatBox sÃ¥ att markerad skÃ¤rmbild automatiskt 
aktiverar ChatBox och bilden blir tillgÃ¤nglig fÃ¶r AI-analys.

ğŸ¯ NUVARANDE STATE (SLUTFÃ–RT):
âœ… Ask AI â†’ Expandera fÃ¶nster + ChatBox (utan bild)
âœ… Select â†’ Overlay + markera + visa "Captured" badge
âœ… ChatBox React komponent med perfekt styling
âœ… Window resize funktioner (600x140 â†” 600x220)
âœ… Transparent background nÃ¤r chat aktiv

ğŸ”„ NYTT FLÃ–DE SOM SKA IMPLEMENTERAS:
State 1: Initial (600x140)
State 2: Select overlay â†’ markera omrÃ¥de  
State 3: Efter selection â†’ Auto-aktivera ChatBox + behÃ¥ll "Captured" badge
State 4: ChatBox har screenshot-kontext fÃ¶r AI
State 5: AI response med bÃ¥de text + bild-analys

ğŸ“ TEKNISK INTEGRATION PLAN:

ğŸ”§ STEG 1: MODIFIERA SELECTION-RESULT EVENT LISTENER
Plats: App.tsx - selection-result listener
Funktion: Efter screenshot â†’ automatiskt aktivera ChatBox
Kontext: Spara screenshot data fÃ¶r AI-anvÃ¤ndning

// Nuvarande kod:
if (result.success && result.type === 'image' && result.imageData) {
    setScreenshotResult(result.imageData); // â† BehÃ¥ll denna!
    // + LÃ¤gg till ChatBox activation
}

ğŸ”§ STEG 2: SCREENSHOT STATE MANAGEMENT  
Ny state: selectedImageForAI (separerad frÃ¥n screenshotResult)
screenshotResult: FÃ¶r "Captured" badge visualization (behÃ¥ll ofÃ¶rÃ¤ndrad)
selectedImageForAI: FÃ¶r AI-kontext i ChatBox

ğŸ”§ STEG 3: CHATBOX CONTEXT ENHANCEMENT
Prop: imageContext?: string (base64 image data)
Visuell indikator: Liten bild-ikon i ChatBox nÃ¤r bild finns
Placeholder: "Ask about the selected area..." istÃ¤llet fÃ¶r "chat with ai"

ğŸ”§ STEG 4: AI MESSAGE PREPARATION
Struktur: { text: string, imageData?: string }
Nuvarande: Bara text meddelande till AI
Nytt: Text + screenshot data kombinerat

ğŸ“Š DATA FLOW DESIGN:

1. USER â†’ Click "Select"
2. SYSTEM â†’ Show overlay
3. USER â†’ Drag selection
4. RUST â†’ Capture area â†’ emit selection-result
5. REACT â†’ setScreenshotResult (badge) + setSelectedImageForAI (AI)
6. REACT â†’ Auto-trigger handleAskAI() med image context
7. SYSTEM â†’ Expand window + show ChatBox
8. CHATBOX â†’ Visa med image indicator
9. USER â†’ Type message
10. SYSTEM â†’ Send {text + imageData} till AI
11. AI â†’ Respond med kombinerad analys
12. SYSTEM â†’ Visa response + shrink window

ğŸ¨ UI/UX FÃ–RBÃ„TTRINGAR:

CHATBOX MED BILD:
- Liten thumbnail hÃ¶gst upp i ChatBox
- Placeholder: "Ask about the selected area..."
- GrÃ¤nssnitt visar att AI har visuell kontext

CAPTURED BADGE (behÃ¥lls):
- Exakt samma styling och placering
- Visar att screenshot finns tillgÃ¤ngligt
- Klickbar fÃ¶r preview (future feature)

ğŸ”® AI IMPLEMENTATION READINESS:

MESSAGE STRUKTUR:
```typescript
interface AIMessage {
  text: string;
  imageData?: string;  // base64 PNG data
  timestamp: number;
  bounds?: CaptureBounds;
}
```

API ENDPOINT PREPARATION:
```typescript
const sendToAI = async (message: AIMessage) => {
  // Future: Skicka till OpenAI Vision API eller liknande
  // Nuvarande: Mock response som hanterar bÃ¥de text + bild
}
```

MOCK AI RESPONSES:
- Text-only: "AI Response to: [text]"
- Text + Image: "AI Analysis: [text] + Visual: [bildanalys]"

ğŸ› ï¸ IMPLEMENTATION ORDNING:

STEG A: Modifiera selection-result listener
âœ“ BehÃ¥ll setScreenshotResult fÃ¶r badge
âœ“ LÃ¤gg till setSelectedImageForAI
âœ“ Auto-trigger handleAskAI efter screenshot

STEG B: Enhance ChatBox fÃ¶r image context
âœ“ Ny prop imageContext
âœ“ Visuell indikator fÃ¶r bild
âœ“ Ã„ndra placeholder text

STEG C: Uppdatera handleSendMessage
âœ“ Kombinera text + imageData
âœ“ Skicka till AI med bÃ¥da

STEG D: Mock AI responses
âœ“ Hantera text + bild scenarios
âœ“ FÃ¶rbered fÃ¶r riktig AI integration

ğŸ§ª TEST SCENARIOS:

SCENARIO 1: Ask AI (endast text)
1. Click "Ask AI" â†’ ChatBox utan bild
2. Type "Hello" â†’ AI svarar text-only

SCENARIO 2: Select + Ask (text + bild)  
1. Click "Select" â†’ Markera omrÃ¥de
2. Auto-ChatBox med bild-kontext
3. Type "What's in this image?" â†’ AI svarar med bildanalys

SCENARIO 3: Kombinerat workflow
1. Select omrÃ¥de â†’ ChatBox aktiveras
2. Type meddelande â†’ AI response
3. Click "Ask AI" igen â†’ Ny session utan bild

ğŸ“‹ SUCCESS CRITERIA:

âœ… "Captured" badge behÃ¥lls ofÃ¶rÃ¤ndrad
âœ… Select â†’ Auto-aktiverar ChatBox  
âœ… ChatBox visar bild-kontext visuellt
âœ… AI fÃ¥r bÃ¥de text + imageData
âœ… Smooth transitions mellan states
âœ… Prepared fÃ¶r riktig AI integration

ğŸ¯ FUTURE AI INTEGRATION:
NÃ¤r riktig AI implementeras behÃ¶vs bara:
1. ErsÃ¤tt mock sendToAI med riktig API
2. Hantera OpenAI Vision API calls
3. Process real image analysis responses

DENNA PLAN GÃ–R AI-INTEGRATIONEN TRIVIAL! ğŸš€